!function(e){var t={};function r(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(i,a,function(t){return e[t]}.bind(null,a));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=116)}({116:function(e,t,r){e.exports=r(117)},117:function(e,t,r){"use strict";r.r(t);var i=r(57);r(118),r(82),window.appFiles=new Vue({el:"#app-files",mixins:[i.a],data:{files:[],ready:!0,secondUserId:parseInt(window.conversationUserId),dragNDropBlocked:!1},computed:{desktopDragNDropEnable:function(){return!this.dragNDropBlocked}},methods:{onChange:function(e){window.draft&&window.draft.activateByInput({uploader:this}),this.ready=e,window.sendForm&&window.sendForm.updateUploadButton(window.appFiles.$refs.fileUploader.isUploadAviable),toggleSubmitButton()}}}),window.isChat||(window.appFilesMobile=new Vue({el:"#app-files-mobile",data:{files:[],ready:!0,secondUserId:parseInt(window.conversationUserId),desktopUploader:window.appFiles?window.appFiles.$refs.fileUploader:null},methods:{onChange:function(e){window.draft&&window.draft.activateByInput({uploader:this}),this.ready=e,toggleSubmitButton()}}})),window.fileUploaders=[window.appFiles,window.appFilesMobile]},118:function(e,r){window.popupAllowConversations=function(e,r){void 0===e&&(e="allowConversations"),void 0===r&&(r="notAllowConversations"),show_popup('<h1 class="popup__title">'+t("Разрешить переписку")+'</h1><hr class="gray mt20 balance-popup__line">'+t("Упс, с этим продавцом были проблемы при сдаче вашего заказа, поэтому он больше не сможет написать вам. Хотите дать возможность продавцу снова отправлять вам сообщения?")+'<div class="popup__buttons-flexible"><button class="popup__button white-btn popup-close-js" id="'+r+'">'+t("Нет, не давать")+'</button><button class="popup__button green-btn popup-close-js" id="'+e+'">'+t("Да, пусть отправляет")+"</button></div>","popup-unblock","",window.isChat?"popup_position_centered":"")}},57:function(e,t,r){"use strict";t.a={data:function(){return{mobileVersion:!1}},created:function(){var e=this;$(window).on("resize",(function(){e.updateMobileStatus()})),this.updateMobileStatus()},methods:{updateMobileStatus:function(){this.mobileVersion=jQuery(window).width()<768}}}},82:function(e,r){window.OfferIndividualModule=function(){var e=!1,r=[],i=[],a=null,o=".js-individual-kwork",s=".js-individual-kwork-error",n={block:".js-custom-kwork",categoryWrap:".js-category-wrap",categorySelect:".js-category-select",description:".js-kwork-description",subCategoryWrap:".js-sub-category-wrap",subCategorySelect:".js-sub-category-select",duration:".js-kwork-duration",stageDuration:".js-stages-duration",title:".js-kwork-title",volume:".js-kwork-volume",price:".js-kwork-price"},c={block:".js-active-kwork"},d={wrapper:".js-offer-payment-type",full:".js-full-payment-type",stages:".js-stages-payment-type",radio:".js-new-offer-radio",hint:".js-payment-type-hint"},l=0,p=0,u=!1,f=!1,h=!1,g=null,m=function(){var e=parseInt($(n.price).val());if(e&&e>=offer.stagesPriceThreshold){var t=$(".js-new-offer-radio.offer-payment-type__radio-item--active");t&&"stages"===t.data("type")?(g="stages",h=!0,u=!0):t&&"all"===t.data("type")&&(g="all",f=!0,u=!0)}else e&&(f=!0);offer.customMinPrice>=offer.stagesPriceThreshold&&(u=!0),offer.customMaxPrice<offer.stagesPriceThreshold&&(f=!0),(f||h)&&u&&$(d.hint).removeClass("hidden")},w=function(){$(".js-request-kwork-id").chosen({width:"100%",disable_search:!0}),$(".js-request-kwork-count").chosen({width:"100%",disable_search:!0}),$(".js-request-kwork-package-type").chosen({width:"100%",disable_search:!0}),$(n.duration).chosen({width:"100%",disable_search:!0,display_disabled_options:!1}),$(n.categorySelect).chosen({width:"100%",disable_search:!0}),$(n.subCategorySelect).chosen({width:"100%",disable_search:!0}),$(".order-extras__select-block select.styled").chosen({width:"108px",disable_search:!0})},v=function(){var e=parseInt($(this).val());$(n.subCategoryWrap).each((function(){parseInt($(this).data("category-id"))===e?($(this).find("select").attr("name","offer_category"),$(this).find("select").attr("required","required"),$(this).removeClass("hidden")):($(this).find("select").attr("name",""),$(this).find("select").removeAttr("required"),$(this).addClass("hidden"))}))},k=function(t){if(e="boolean"==typeof t&&t,$(this).is("input, select, textarea")&&null!==$(this).parents(".js-offer-individual-item")){var r=$(this).parents(".js-offer-individual-item").data("target");i.includes(r)||i.push($(this).parents(".js-offer-individual-item").data("target"))}var a=[];return $(s).html(""),$(c.block).length&&!$(c.block).hasClass("hidden")?a.push(b()):a.push(x()),I(),-1!==a.indexOf(!1)?(D(),!1):(B(),!0)},b=function(){z(),P(0);var e=$(".js-request-kwork-id").val();if(!e||""===e)return!1;if($("input[name=want_id]").length&&!$("input[name=want_id]:checked").length)return!1;var r=0,i=$('input[name="customExtraName[]"]');return i&&(r=i.filter((function(){return!$(this).val()})).length),!(r>0)&&(E(),l>offer.customMaxPrice||l<offer.customMinPrice?(offer.customMaxPrice===offer.customMinPrice?$(s).html(t("Цена услуги для данного заказа не может быть более {{0}}",[Utils.priceFormatWithSign(offer.customMaxPrice,offer.lang)])):$(s).html(t("Допустимая цена услуги для данного заказа от {{0}} до {{1}}",[Utils.priceFormatWithSign(offer.customMinPrice,offer.lang),Utils.priceFormatWithSign(offer.customMaxPrice,offer.lang)])),!1):!(!window.offerForm||!window.offerForm.isValidated(["offer-description"]))&&y())},x=function(){var e=[];return e.push(A()),e.push(y()),e.push(S()),isNaN(parseInt($("input[name=want_id]:checked").val()))&&(e.push(j()),e.push(C())),offer.isOrderStageTester&&"stages"===g?(window.offerStages.validateStages(!0),e.push(!window.offerStages.checkDisableButtonSend())):e.push(_()),!(!window.offerForm||!window.offerForm.isValidated(["offer-description","title","description"]))&&(!(offer.isOrderStageTester&&p>=offer.stagesPriceThreshold&&!g)&&-1===e.indexOf(!1))},_=function(){return z("title"),!$(n.title).siblings(".js-content-editor").is(":visible")||""!==$(n.title).val()&&0===StopwordsModule._testContacts($(n.title).val()).length||(r.push({target:"title",text:t("Введите название")}),!1)},y=function(){if(z("description"),!$(n.description).length)return!0;var e=$(n.description).val().replace(/<\/?[^>]*>/gi,"").replace(/&nbsp;/gi," ").replace(/\s\s+/g," ").trim();return!(!$(n.description).hasClass("js-ignore-min")&&""===e||!$(n.description).hasClass("js-ignore-min")&&e.length<$(n.description).data("min")||e.length>$(n.description).data("max")||0!==StopwordsModule._testContacts(e).length)||(r.push({target:"description",text:""}),!1)},j=function(){return!$(n.categorySelect).length||(z("category"),!($(n.categoryWrap).length&&$(n.categoryWrap).is(":visible")&&isNaN(parseInt($(n.categorySelect).val())))||(r.push({target:"category",text:t("Выберите рубрику")}),!1))},C=function(){if(!$(n.subCategoryWrap).length)return!0;z("sub_category");var e=$(n.categorySelect).val(),t=$(n.subCategoryWrap).filter('[data-category-id="'+e+'"]'),r=t.find(n.subCategorySelect);return P(r.val()),!t.length||!isNaN(parseInt(r.val()))},P=function(e){"undefined"!=typeof minPrices&&(minPrices.hasOwnProperty(e)?offer.customMinPrice=minPrices[e]:offer.customMinPrice=minPrices[0],"undefined"!=typeof stageMinPrices?stageMinPrices.hasOwnProperty(e)?offer.stageMinPrice=stageMinPrices[e]:offer.stageMinPrice=stageMinPrices[0]:offer.stageMinPrice=offer.customMinPrice,offer.customMinPrice===offer.customMaxPrice?$(n.price).attr("placeholder",Utils.priceFormat(offer.customMaxPrice,offer.lang)):$(n.price).attr("placeholder",Utils.priceFormat(offer.customMinPrice,offer.lang)+" - "+Utils.priceFormat(offer.customMaxPrice,offer.lang)),0!==e&&(A(),offer.isOrderStageTester&&(window.offerStages.updateOptionsStageMinPrice(offer.stageMinPrice),window.offerStages.updatePlaceholderPrice(),window.offerStages.validateStagesPrices())))},S=function(){return!($("input[name=want_id]").length&&!$("input[name=want_id]:checked").length)&&(z("category"),z("sub_category"),!0)};_updateCustomPrice=function(){"stages"===$(".js-new-offer-radio.offer-payment-type__radio-item--active").data("type")&&window.offerStages.updateCustomPrice()};var M=function(){if(u)return!0;u=!0,$(d.wrapper).removeClass("hidden"),U(),T(),q(null)},F=function(){if(!u)return!0;u=!1,$(d.wrapper).addClass("hidden"),q(null)},W=function(){if(f)return!0;f=!0,$(d.full).removeClass("hidden"),O(!1)},U=function(){if(!f)return!0;f=!1,$(d.full).addClass("hidden")},T=function(){if(!h)return!0;h=!1,$(d.stages).addClass("hidden")},q=function(e){var t=$(e&&e.currentTarget),r=t&&t.data("type");$(d.radio).removeClass("offer-payment-type__radio-item--active"),t.addClass("offer-payment-type__radio-item--active"),$(d.hint).removeClass("hidden"),"stages"===r?(g="stages",U(),function(){if(h)return!0;h=!0,$(d.stages).removeClass("hidden"),O(!0)}(),k(),_updateCustomPrice()):"all"===r?(g="all",W(),T(),k()):(g=null,$(d.hint).addClass("hidden"),T(),U())},O=function(e){e?$(n.stageDuration).removeAttr("disabled"):$(n.stageDuration).attr("disabled","disabled"),$(n.duration).trigger("chosen:updated")},I=function(){D(),e||$.each(r,(function(e,t){t.text&&i.includes(t.target)&&$(o).find('[data-target="'+t.target+'"] .js-target-error').html(t.text).data("isTemp",!0)}))},N=function(e){1!=e.data("isTemp")&&e.hasClass("no-hide")||e.html("")},z=function(e){if(e){var t=$(o).find('[data-target="'+e+'"] .js-target-error');N(t),r=r.filter((function(t){return t.target!==e}))}else $(o).find(".js-target-error").each((function(e,t){var r=$(t);N(r)}));B()},D=function(){$(".btn-disable-toggle").prop("disabled",!0).addClass("disabled")},B=function(){$(".btn-disable-toggle").prop("disabled",!1).removeClass("disabled")},K=function(){"undefined"==typeof price&&(price=$(this).data("price"));var e=function(e){return Utils.priceFormatWithSign(e,offer.lang,void 0,"₽")},r=$(this).data("commission");void 0===r&&(r=calculateCommission(price,turnover));for(var i="\t\t<h1>"+t("Комиссия Kwork")+"</h1>\t\t\t\t<p>"+t("Комиссия в Kwork снижается по мере того, как растет ваш оборот с конкретным клиентом. Чем больше ваша сумма сделок с отдельным покупателем, тем ниже комиссия Kwork.")+'</p>\t\t\t\t<p class="mt15">'+t("В прошлом оборот с этим клиентом составил:")+"</p>\t\t<p><strong>"+e(r.turnover)+'</strong></p>\t\t\t\t<p class="mt15">'+t("Ваша цена за работу:")+"</p>\t\t<p><strong>"+e(r.price)+'</strong></p>\t\t\t\t<table class="mt15">\t\t\t<thead>\t\t\t\t<tr>\t\t\t\t\t<th>'+t("Оборот с клиентом")+"</th>\t\t\t\t\t<th>"+t("Комиссия")+"</th>\t\t\t\t\t<th>"+t("Ваша цена")+"</th>\t\t\t\t\t<th>"+t("Вы получите")+"</th>\t\t\t\t</tr>\t\t\t</thead>\t\t\t<tbody>\t",a=0;a<r.ranges.length;a++){var o=r.ranges[a];i+="\t\t\t\t<tr"+(o.price?"":' class="disabled"')+">\t\t\t\t\t<td>"+o.title+"</td>\t\t\t\t\t<td>"+100*o.percentage+"%</td>\t\t\t\t\t<td>"+(o.price?e(o.price):"")+"</td>\t\t\t\t\t<td>"+(o.priceWorker?e(o.priceWorker):"n/a")+"</td>\t\t\t\t</tr>\t\t"}i+='\t\t\t</tbody>\t\t\t<tfoot>\t\t\t\t<tr>\t\t\t\t\t<td colspan="2"></td>\t\t\t\t\t<td>'+t("Итого: ")+e(r.price)+"</td>\t\t\t\t\t<td>"+t("Итого: ")+e(r.priceWorker)+'</td>\t\t\t\t</tr>\t\t\t</tfoot>\t\t</table>\t\t<div class="ta-center">\t\t\t<button class="popup__button popup-close-js green-btn m-wMax w250">'+t("Закрыть")+"</button>\t\t</div>\t",show_popup(i,void 0,void 0,"kwork-price-explanation-popup")},V=function(){$(".js-request-kwork-id .empty").remove();var e=$(".js-request-kwork-id option:checked").val();$(".order-extras li").hide();var t=$(".order-extras li[data-pid="+e+"]");t.length>0?(t.show(),E()):e&&(a&&a.abort(),$(".order-extras__list input[type=checkbox]").prop("checked",!1).trigger("change"),a=$.ajax({url:"/api/extras/getbykwork",type:"post",dataType:"json",data:{kwork_id:e},success:function(t){if(a=null,!0===t.success){for(var r in t.extras)if(t.extras.hasOwnProperty(r)){var i=t.extras[r],o="";o='<li class="order-extras__item order-extras__item_old" data-pid="'+e+'" data-id="'+i.id+'" style="display:none;"><input class="order-extras__input styled-checkbox" data-payer-price="'+i.payerPrice+'" data-price="'+i.price+'" data-time="'+i.duration+'" data-id="'+i.id+'" name="gextras[]" type="checkbox" value="'+i.id+'"><label for="order-extras_'+i.id+'" class="w460">'+i.name.ucFirst()+'</label><div class="order-extras__select-block"><select class="js-order-extras__count styled input input_size_s" data-affected-checkbox="'+i.id+'" id="extra_count'+i.id+'" name="extra_count'+i.id+'">';for(var s=0;s<offer.maxKworkCount;s++){var n=s+1,c=calculateCommission(i.payerPrice*n,turnover);o+='<option value="'+n+'">'+n+" ("+Utils.priceFormatWithSign(c.priceWorker,offer.lang,"&nbsp;","Р")+")</option>"}o+="</select></div></li>",$(".order-extras__list").prepend(o),$(".js-order-extras__count[data-affected-checkbox]").on("change",(function(e){var t=$(e.delegateTarget);$('.order-extras__item_old[data-id="'+t.data("affected-checkbox")+'"] .order-extras__input').prop("checked",!0)})),$(".order-extras li[data-pid="+e+"]").show(),$(".order-extras li[data-pid="+e+"] select").chosen({width:"108px",disable_search:!0})}E()}}})),$(".order-extras li.custom").show()},E=function(){var e,r,i,a=$(".js-request-kwork-id option:selected"),o=a.data("package"),s=a.data("rate")||offer.multiKworkRate;if(1!==o)e=0^$(".js-request-kwork-count").val(),r=e*a.data("price"),i=0^a.data("time");else{var n=$(".js-request-kwork-package-type").val();if(!n)return!1;var c=offer.kworkPackages[$(".js-request-kwork-id").val()][n];e=1,r=parseFloat(c.payerPrice),i=0^c.duration}if(a.data("base-volume")>0){var d=a.data("base-volume");i=getVolumedDuration(i,d,d*e,"offer")}else i=getDuration(i,e,s);$(".order-extras__item_old").each((function(){var e=$(this).find(".order-extras__input"),t=$("#extra_count"+e.val()),a=0^e.data("payerPrice"),o=0^e.data("time"),n=0^t.val(),c=calculateCommission(a,turnover);e.data("price",c.priceWorker),t.find("option").each((function(){var e=parseInt($(this).prop("value")),t=calculateCommission(a*e,turnover),r=Utils.priceFormatWithSign(t.priceWorker,offer.lang," ","Р");$(this).text(e+" ("+r+")")})),t.trigger("chosen:updated"),e.is(":checked")&&(r+=a*n,i+=getDuration(o,n,s))})),$(".order-extras__item.custom").each((function(){var e=$(this),t=e.find(".js-new-extra-price"),a=e.find(".js-new-extra-days"),o=0^t.find("option:checked").data("payerValue"),n=0^a.val();t.find("option").each((function(){var e=parseFloat($(this).data("payerValue")),t=calculateCommission(e,turnover),r=Utils.priceFormatWithSign(t.priceWorker,offer.lang," ","Р");$(this).text(r).data("seller-value",t.priceWorker).attr("data-seller-value",t.priceWorker)})),t.trigger("chosen:updated"),r+=1*o,i+=getDuration(n,1,s)})),R(turnover);var p=calculateCommission(r,turnover),u=p.priceWorker,f=Utils.priceFormat(r,offer.lang,"&nbsp;"),h=Utils.priceFormat(u,offer.lang,"&nbsp;");l=r,"ru"===offer.lang?(f+='&nbsp;<span class="rouble">Р</span>',h+='&nbsp;<span class="rouble">Р</span>'):(f='<span class="usd">$</span>'+f,h='<span class="usd">$</span>'+h),$(".js-total-sum").html(t("Стоимость: ")+f);var g=t("Вы получите")+": "+h+' <a href="javascript:;" class="js-price-explanation kwork-price-explanation">'+t("Подробнее")+"</a>",m=$(".js-total-worker-sum");m.html(g),m.closest(".js-active-kwork, .js-individual-kwork").find(".js-price-explanation").data("commission",p),$(".js-total-time").html(i+" "+Utils.declOfNum(i,[t("день"),t("дня"),t("дней")]))},A=function(){var e=$(n.price),i=$("#kwork-price-description");if(!e.is(":visible"))return!0;if(function(){z("price");var e=$(n.price);if(!e.is(":visible"))return!0;/[^0-9]/gi.test(e.val())&&e.val(e.val().replace(/[^0-9]/gi,""));var i=parseInt(e.val());return isNaN(i)?(r.push({target:"price",text:t("Введите стоимость")}),!1):(p=i,i<offer.customMinPrice||i>offer.customMaxPrice?offer.customMinPrice===offer.customMaxPrice?(r.push({target:"price",text:t("Стоимость должна быть равна {{0}}",[Utils.priceFormatWithSign(offer.customMinPrice,offer.lang)])}),!1):(r.push({target:"price",text:t("Стоимость может быть от {{0}} до {{1}}",[Utils.priceFormatWithSign(offer.customMinPrice,offer.lang),Utils.priceFormatWithSign(offer.customMaxPrice,offer.lang)])}),!1):(i>=offer.stagesPriceThreshold&&offer.isOrderStageTester?M():(F(),W()),!0))}()){var a=0^e.val(),o=calculateCommission(a,turnover),s=a-o.priceKwork,c=t("Вы получите {{0}}",[Utils.priceFormatWithSign(s,offer.lang)]);return c+=' <a href="javascript:void(0);" class="js-price-explanation kwork-price-explanation">'+t("Подробнее")+"</a>",i.html(c),e.closest(".js-custom-kwork, .js-individual-kwork").find(".js-price-explanation").data("commission",o),!0}return i.html(""),!1},H=function(){var e=$(this),r='<li class="order-extras__item extrasping-settings extra-field-block-css extra-edit-block-css custom"><div class="offer-sprite offer-sprite-option pull-left m-hidden mt2"></div><input name="customExtraName[]" maxlength="50" value="" style="width:340px;" class="styled-input f14 pull-left m-wMax m-border-box order-new-extras__input" type="text"><div class="new-order-extras__select-block"><select id="extratime" class="js-new-extra-select js-new-extra-days input input_size_s" name="customExtraTime[]" style="width:16%;"><option value="0"> '+t("{{0}} дней",[0])+' </option><option value="1"> '+t("{{0}} день",[1])+' </option><option value="2"> '+t("{{0}} дня",[2])+' </option><option value="3"> '+t("{{0}} дня",[3])+' </option><option value="4"> '+t("{{0}} дня",[4])+' </option><option value="5"> '+t("{{0}} дней",[5])+' </option><option value="6"> '+t("{{0}} дней",[6])+' </option><option value="7"> '+t("{{0}} дней",[7])+' </option><option value="8"> '+t("{{0}} дней",[8])+' </option><option value="9"> '+t("{{0}} дней",[9])+' </option><option value="10"> '+t("{{0}} дней",[10])+' </option></select><div class="custom-option-price"><select name="customExtraPrice[]" class="js-new-extra-select js-new-extra-price input input_size_s" style="width:16%;">'+offer.customPricesOptionsHtml+'</select></div></div><div class="js-new-order-extras-delete new-order-extras__delete del-opt cur ml6 dib" data-id="0" title="'+t("Удалить")+'"><i class="ico-close-14"></i></div><div class="clear"></div></li>',i=$(r);i.find(".js-new-extra-price").chosen({width:"100px",disable_search:!0}),i.find(".js-new-extra-days").chosen({width:"80px",disable_search:!0}),$(".order-extras__list").append(i),$("#message_body").trigger("input"),$(e).text(t("Создать еще опцию")),E(),D()},Q=function(){$(this).closest("li").remove(),$("#message_body").trigger("input"),$(".js-add-extras li.extrasping-settings").length<1&&$("#order-extras__create").text(t("Создать опцию")),E(),k()},R=function(e){$(".max-custom-options-tooltip").remove();var t=$(".order-extras__list li.custom"),r=calculateCommission(window.maxOptionsSum,e),i=function(){for(var e=0,t=$(".order-extras__list li.custom"),r=0;r<t.length;r++){var i=$(t[r]);e+=clearPriceStr(i.find("select.js-new-extra-price option:selected").data("sellerValue"))}return e}(),a=0;$("li.order-extras__item_old").each((function(){$(this).is(":visible")&&($input=$(this).find("input.order-extras__input"),a+=$input.data("price"))}));var o=i+a;if(i>0){var s="Общая цена всех доп. опций - до "+Utils.priceFormatWithSign(r.priceWorker,offer.lang," ","руб.")+" Сейчас "+Utils.priceFormatWithSign(o,offer.lang," ","руб.");t.last().parent().append("<div class='max-custom-options-tooltip'>"+s+"</div>")}var n=$("#track-send-message-button");o<=r.priceWorker?(n.removeClass("btn_disabled").prop("disabled",!1),t.removeClass("custom-price-error"),$(".js-order-extras-create").show()):(n.addClass("btn_disabled").prop("disabled",!0),t.addClass("custom-price-error"),$(".max-custom-options-tooltip").addClass("error").html(s+"<br>Уменьшите стоимость предыдущих опций, чтобы добавить еще одну"),$(".js-order-extras-create").hide())};return{init:function(){w(),$(document).on("change",".js-request-kwork-id",(function(){$(this).val()?($(".js-send-request__total").show(),$(".js-order-extras").show()):($(".js-send-request__total").hide(),$(".js-order-extras").hide()),$(this).find("option:checked").data("package")?($(".request-kwork-count-block").hide(),$(".request-kwork-package-block").show()):($(".request-kwork-count-block").show(),$(".request-kwork-package-block").hide()),E(),k()})).on("change",".js-request-kwork-count, .js-request-kwork-package-type, .order-extras__input, .js-order-extras__count, .js-new-extra-select",(function(){E(),k()})).on("click",".order-extras__item",(function(e){var t=$(".styled-checkbox[data-id="+$(this).data("id")+"]");t.prop("checked")?$(e.target).is(".chosen-container")||0!==$(e.target).closest(".chosen-container").length||t.prop("checked",!1).trigger("change"):t.prop("checked",!0).trigger("change")})).on("change",".js-new-extra-price",(function(){var e=$(this).find("option:checked").data("sellerValue"),t=$(this).closest(".new-order-extras__select-block").find(".js-new-extra-count");t.find("option").each((function(){var t=e*$(this).attr("value");$(this).text($(this).attr("value")+"("+Utils.priceFormatWithSign(t,offer.lang)+")")})),t.trigger("chosen:updated")})).on("change",".js-request-kwork-id",V).on("click",".js-new-order-extras-delete",Q).on("click",".js-order-extras-create",H).on("input","input[name=want_id]",k).on("input",'input[name="customExtraName[]"]',k).on("change",n.categorySelect,v).on("change",n.duration,k).on("input",n.title,k).on("input",n.volume,k).on("input",n.price,k).on("blur",n.price,_updateCustomPrice).on("input",n.categorySelect,k).on("input",n.subCategorySelect,k).on("input",n.description,k).on("click",".js-price-explanation",K).on("click","#change-to-kwork-choose",(function(){$("#suggestCustomKworkToggle, #change-to-kwork-choose").addClass("hidden"),$("#suggestKworkToggle, #change-to-custom-kwork").removeClass("hidden")})).on("click","#change-to-custom-kwork",(function(){$("#suggestKworkToggle, #change-to-custom-kwork").addClass("hidden"),$("#suggestCustomKworkToggle, #change-to-kwork-choose").removeClass("hidden")})),$(d.radio).on("click",q),offer.isOrderStageTester&&(window.offerStages.onChangeStage=function(){k(!1)}),m()},btnDisable:D,btnEnable:B,validateIndividualKwork:k,showBackendError:function(e){D(),e.errors?$.each(e.errors,(function(e,t){$(o).find('[data-target="'+t.target+'"] .js-target-error').html(t.text)})):$(s).html(e.error),offer.isOrderStageTester&&e.errors&&window.offerStages.showBackendStageErrors(e.errors)},clearShowErrorForBlock:function(){e=!1,r=[],i=[]},setSerialize:function(e){"stages"===e?($(".js-stage-name").removeClass("no-serialize"),$(".js-stage-price").removeClass("no-serialize"),$(".js-kwork-title").addClass("no-serialize"),$(".js-kwork-volume").addClass("no-serialize")):($(".js-kwork-title").removeClass("no-serialize"),$(".js-kwork-volume").removeClass("no-serialize"),$(".js-stage-name").addClass("no-serialize"),$(".js-stage-price").addClass("no-serialize"))},hidePaymentType:F,selectPaymentType:q}}()}});